<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>real-time-forum</title>
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="css/header.css">
    <link rel="stylesheet" href="css/auth.css">
    <link rel="stylesheet" href="css/spinner.css">


</head>
<body>
      <script type="module" >
        import { linkApi } from "./js/helper/api_link.js";        
        import { isSessionFoundBoolean } from "./js/verify_sessions.js";
        import { displayFom } from "./js/pages/signUpSignIn.js";
        import { displayFormMecanisme } from "./js/helper/diplayingFormMecanisme.js";
        import {signInForm ,signUpForm} from "./js/auth/forms.js";
        import { indexPage } from "./js/pages/index.js";
          
          document.addEventListener('DOMContentLoaded', (event) => {

            async function checkUserSession() {
                const data = await isSessionFoundBoolean();
                if (data===undefined) {
                     displayFom();

                    const formSignIn=document.querySelector('.form-1');
                    const formSignUp=document.querySelector('.form-2');
                    const _ContentForms=document.querySelector('.content');
                    let spinner = document.querySelector('.spinner');
                    let row=document.querySelectorAll('.row');

                    // gerer la navigation entre les deux formulaire
                    displayFormMecanisme(formSignUp,formSignIn,row);
                    
                
                if(formSignIn) signInForm(_ContentForms,formSignIn,formSignUp,spinner,linkApi)
                if(formSignUp) signUpForm(_ContentForms,formSignUp,formSignIn,spinner,linkApi)
             
                }else{
                    indexPage(data); //afficher l'interface 
                }
            }
            (async () => {
                await checkUserSession();
            })();
            
        }); 
      </script>
</body>
</html>